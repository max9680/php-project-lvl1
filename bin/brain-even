#!/usr/bin/php
<?php

require_once __DIR__ .'/../vendor/autoload.php';

use function BrainGames\Cli\line;
use function BrainGames\Cli\prompt;

line("Welcome to the Brain Game!\n");
$name = prompt('May I have your name? ');
line("Hello, %s!\n", $name);

line("Answer \"yes\" if the number is even, otherwise answer \"no\"\n");

$numberCorrectAnswers = 0;

for ($i = 0;$i < 3;$i++) {
    $startNumber = 0;
    $endNumber = 100;
    $number = rand($startNumber , $endNumber);
    line("Question: %s\n", $number);
    $answer = prompt("Your answer: ");
    if (($answer !== "yes") && ($answer !== "no")) {
        line("Incorrect answer.");
        line("Let's try again!\n");
        break;
    }

    if ($number % 2 == 0) {
        $correctAnswer = "yes";
    } else {
        $correctAnswer = "no";
    }

    if ($answer == $correctAnswer) {
        line("Correct!\n");
        $numberCorrectAnswers++; 
    } else {
        line("%s is wrong answer ;(. ", $answer);
        line("Correct answer was %s.\n", $correctAnswer);
        break;
    }

}

if ($numberCorrectAnswers == 3) {
    line("Congratilations, $name!\n");
} else {
    line("Let's try again, $name!\n");
}
